<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="FRP简单介绍frp 是什么？frp 是一个专注于内网穿透 的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议。可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网。为什么使用 frp？通过在具有公网 IP 的节点上部署 frp 服务端，可以轻松地将内网服务穿透到公网，同时提供诸多专业的功能特性，这包括：1、客户端服务端通信支持 TCP、KCP 以及">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2023/10/20/FRP%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="FRP简单介绍frp 是什么？frp 是一个专注于内网穿透 的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议。可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网。为什么使用 frp？通过在具有公网 IP 的节点上部署 frp 服务端，可以轻松地将内网服务穿透到公网，同时提供诸多专业的功能特性，这包括：1、客户端服务端通信支持 TCP、KCP 以及">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/1.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/2.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/3.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/4.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/5.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/6.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/7.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/8.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/9.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/10.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/11.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/12.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/13.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/14.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/15.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/16.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/17.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/18.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/19.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/20.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/21.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/22.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/23.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/24.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/25.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/26.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/27.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/28.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/29.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/30.png">
<meta property="og:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/31.png">
<meta property="article:published_time" content="2023-10-20T01:18:17.211Z">
<meta property="article:modified_time" content="2023-10-20T01:18:08.732Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="file:///C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/1.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-FRP简单介绍" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/20/FRP%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D/" class="article-date">
  <time class="dt-published" datetime="2023-10-20T01:18:17.211Z" itemprop="datePublished">2023-10-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="FRP简单介绍"><a href="#FRP简单介绍" class="headerlink" title="FRP简单介绍"></a>FRP简单介绍</h2><h3 id="frp-是什么？"><a href="#frp-是什么？" class="headerlink" title="frp 是什么？"></a>frp 是什么？</h3><h3 id="frp-是一个专注于"><a href="#frp-是一个专注于" class="headerlink" title="frp 是一个专注于"></a>frp 是一个专注于</h3><p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F&spm=1001.2101.3001.7020">内网穿透</a></p>
<h3 id="的高性能的反向代理应用，支持-TCP、UDP、HTTP、HTTPS-等多种协议。可以将内网服务以安全、便捷的方式通过具有公网-IP-节点的中转暴露到公网。"><a href="#的高性能的反向代理应用，支持-TCP、UDP、HTTP、HTTPS-等多种协议。可以将内网服务以安全、便捷的方式通过具有公网-IP-节点的中转暴露到公网。" class="headerlink" title="的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议。可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网。"></a>的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议。可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网。</h3><h2 id="为什么使用-frp？"><a href="#为什么使用-frp？" class="headerlink" title="为什么使用 frp？"></a>为什么使用 frp？</h2><h3 id="通过在具有公网-IP-的节点上部署-frp-服务端，可以轻松地将内网服务穿透到公网，同时提供诸多专业的功能特性，这包括："><a href="#通过在具有公网-IP-的节点上部署-frp-服务端，可以轻松地将内网服务穿透到公网，同时提供诸多专业的功能特性，这包括：" class="headerlink" title="通过在具有公网 IP 的节点上部署 frp 服务端，可以轻松地将内网服务穿透到公网，同时提供诸多专业的功能特性，这包括："></a>通过在具有公网 IP 的节点上部署 frp 服务端，可以轻松地将内网服务穿透到公网，同时提供诸多专业的功能特性，这包括：</h3><p>1、客户端服务端通信支持 TCP、KCP 以及 Websocket 等多种协议。<br>2、采用 TCP 连接流式复用，在单个连接间承载更多请求，节省连接建立时间。<br>3、代理组间的负载均衡。<br>4、端口复用，多个服务通过同一个服务端端口暴露。<br>5、多个原生支持的客户端插件（静态文件查看，HTTP、SOCK5 代理等），便于独立使用 frp 客户端完成某些工作。<br>6、高度扩展性的服务端插件系统，方便结合自身需求进行功能扩展。<br>7、服务端和客户端 UI 页面。</p>
<h2 id="Windows版下载地址"><a href="#Windows版下载地址" class="headerlink" title="Windows版下载地址"></a>Windows版下载地址</h2><p>（linux版可以直接wget）</p>
<h2 id="："><a href="#：" class="headerlink" title="："></a>：</h2><p><a target="_blank" rel="noopener" href="https://github.com/fatedier/frp/releases">https://github.com/fatedier/frp/releases</a><br>目前可以在Github的Release页面中下载到最新版本的客户端和服务端二进制文件，所有文件（服务端，客户端）被打包在一个压缩包中。<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/1.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/1.png"></a></p>
<h2 id="服务器端部署（这里以-云服务器-linux系统-为例）："><a href="#服务器端部署（这里以-云服务器-linux系统-为例）：" class="headerlink" title="服务器端部署（这里以 云服务器-linux系统 为例）："></a>服务器端部署（这里以 云服务器-linux系统 为例）：</h2><p>从GitHub上下载系统对应版本的frp工具：<br>wget <a target="_blank" rel="noopener" href="https://github.91chi.fun//https://github.com//fatedier/frp/releases/download/v0.39.1/frp_0.39.1_linux_amd64.tar.gz">https://github.91chi.fun//https://github.com//fatedier/frp/releases/download/v0.39.1/frp_0.39.1_linux_amd64.tar.gz</a></p>
<p>解压后重命名为frp移至&#x2F;usr&#x2F;local&#x2F;下<br>自己选择位置<br>好像放在&#x2F;root下在之后创建系统服务会有权限问题<br>tar zxvf frp_0.39.1_linux_amd64.tar.gz<br>mv frp_0.39.1_linux_amd64 frp<br>mv frp &#x2F;usr&#x2F;local&#x2F;</p>
<p>修改服务端配置文件frps.ini（以下的7000是作为frp服务端的端口，7500是web界面的端口）<br>（frp有服务端和客户端，两端需要通过端口建立连接，再进行后续的其他端口映射）<br>cd &#x2F;usr&#x2F;local&#x2F;frp&#x2F;<br>vim frps.ini<br># frps.ini<br>[common]<br>bind_port &#x3D; 7000<br># 服务端绑定的端口，用于建立frp链接，需要服务器的防火墙放行端口<br>bind_addr &#x3D; 0.0.0.0<br>vhost_http_port &#x3D; 8080<br># 客户端映射到服务器的 http 端口（即访问公网服务器的该端口，服务器就会将该端口映射到内网客户端指定的端口上，就能实现内网穿透了）</p>
<p># 客户端连接服务端的认证方式（不设置秘钥的话任何人都能来和服务器建立frp链接了）<br>authentication_method &#x3D; token<br>token &#x3D; xxxxxx</p>
<p># Dashboard管理界面，需要服务器的防火墙放行端口<br>dashboard_port &#x3D; 7500<br>dashboard_user &#x3D; admin<br>dashboard_pwd &#x3D; xxxxxx</p>
<p>放行服务器相应的端口<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/2.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/2.png"></a><br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/3.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/3.png"></a></p>
<p>运行frps<br>.&#x2F;frps -c .&#x2F;frps.ini<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/4.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/4.png"></a><br>运行成功后，可以访问 http:&#x2F;&#x2F;{ip或域名}:7500 的Dashboard页面<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/5.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/5.png"></a><br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/6.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/6.png"></a></p>
<p>创建frps系统服务，自启动和后台运行<br>1、修改frps.service配置的路径<br>vim systemd&#x2F;frps.service<br># frps.service<br>[Unit]<br>Description&#x3D;Frp Server Service<br>After&#x3D;network.target</p>
<p>[Service]<br>Type&#x3D;simple<br>User&#x3D;nobody<br>Restart&#x3D;on-failure<br>RestartSec&#x3D;5s<br>ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;frp&#x2F;frps -c &#x2F;usr&#x2F;local&#x2F;frp&#x2F;frps.ini            &#x2F;&#x2F;修改此处的路径，路径为你的frp的实际存放路径<br>LimitNOFILE&#x3D;1048576</p>
<p>[Install]<br>WantedBy&#x3D;multi-user.target</p>
<p>2、复制至系统服务文件夹下（这样才能通过调用systemctl指令快速启动frps，就不用每次都跑到frp路径下.&#x2F;frps -c .&#x2F;frps.ini运行了）<br>cp systemd&#x2F;frps.service &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;</p>
<p>3、启动frps<br>systemctl start frps</p>
<p>4、打开自启动<br>systemctl enable frps</p>
<p>5、重启应用<br>systemctl restart frps</p>
<p>6、停止应用<br>systemctl stop frps</p>
<p>7、查看应用的日志<br>systemctl status frps</p>
<p>8、查看监听的端口<br>ss -tulwn | grep LISTEN</p>
<h2 id="客户端部署（这里以-windows-为例）："><a href="#客户端部署（这里以-windows-为例）：" class="headerlink" title="客户端部署（这里以 windows 为例）："></a>客户端部署（这里以 windows 为例）：</h2><p>下载好frp压缩包并解压到D盘：<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/7.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/7.png"></a><br>修改客户端配置文件frpc.ini，或者直接覆盖成以下形式：<br>[common]<br># 服务端设置的token<br>token &#x3D; xxxxxx<br># 服务端的ip地址<br>server_addr &#x3D; 43.139.77.112<br># 服务端绑定的端口<br>server_port &#x3D; 7000</p>
<p># AdminUI的配置，可以在网页中修改配置，这是客户端的frp控制面板<br>admin_addr &#x3D; 127.0.0.1<br>admin_port &#x3D; 7400<br>admin_user &#x3D; admin<br>admin_pwd &#x3D; admin<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/8.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/8.png"></a></p>
<p>[web]<br>type &#x3D; http<br># 本地客户端提供http服务的端口<br>local_port &#x3D; 8080<br>local_ip &#x3D; 127.0.0.1<br># 服务器域名，没有域名则填 ip<br>custom_domains &#x3D; 43.139.77.112<br># 映射到服务器的8080端口，需要服务器提前配置好 vhost_http_port &#x3D; 8080，否则客户端映射不上<br>remote_port &#x3D; 8080</p>
<p>#只要是端口服务都能实现映射，效果都是“访问公网的某端口（remote_port）能直达内网的某服务（local-port）”<br>#[ssh]<br>#type &#x3D; tcp<br>#local_ip &#x3D; 127.0.0.1<br>#local_port &#x3D; 22<br>#remote_port &#x3D; 6000</p>
<p># windows远程连接的配置<br>#[RDP]<br>#type &#x3D; tcp<br>#local_ip &#x3D; 127.0.0.1<br>#local_port &#x3D; 3389<br>#remote_port &#x3D; 13389</p>
<p>配置完毕后在当前路径打开cmd，并执行frpc.exe<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/9.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/9.png"></a><br>这样映射就完成了</p>
<h2 id="验证（其他服务-端口同理）："><a href="#验证（其他服务-端口同理）：" class="headerlink" title="验证（其他服务&#x2F;端口同理）："></a>验证（其他服务&#x2F;端口同理）：</h2><p>客户端搭建http服务（这里使用小皮，一键式）<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/10.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/10.png"></a><br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/11.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/11.png"></a><br>把网站源码 missing 放到 http 根目录下<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/12.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/12.png"></a><br>修改端口号为 frpc.ini 配置文件对应的 8080<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/13.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/13.png"></a><br>同时修改 http 根目录为 missing 源码文件夹，这样一访问就直接是 missing 里的页面了<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/14.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/14.png"></a><br>此时直接访问 公网云服务器ip:8080，显示的是内网机器搭建的网站<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/15.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/15.png"></a><br>成功！</p>
<h2 id="配置映射程序后台运行，以及映射程序开机自启动："><a href="#配置映射程序后台运行，以及映射程序开机自启动：" class="headerlink" title="配置映射程序后台运行，以及映射程序开机自启动："></a>配置映射程序后台运行，以及映射程序开机自启动：</h2><p>现在的状态是服务器一直开着frp服务帮忙映射，每次也是开机自启，需要手动关闭，但是云服务器放着就行<br>而客户端的状态是已经搭建好网站，一直在提供http服务，这个不手动关闭也不会关闭的<br>唯一的弊端是，与云服务器建立frp连接的cmd窗口则需要一直保持着，关了就断开映射的连接了<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/16.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/16.png"></a><br>可以通过写bat脚本，让该程序处于后台运行，然后将bat脚本送进开机自启动，这样就能实现客户端持续提供http以及建立与公网的映射了<br>在frp目录下，新建startfrp.txt：<br>@echo off<br>if “%1” &#x3D;&#x3D; “h” goto begin<br>mshta vbscript:createobject(“wscript.shell”).run(“%~nx0 h”,0)(window.close)&amp;&amp;exit<br>:begin</p>
<p>cd “D:\frp”</p>
<p>frpc.exe<br>修改完成后文件名改为startfrp.bat<br>运行该文件就能建立映射连接了，且不会弹出窗口，可以在任务管理器找到frpc.exe的任务信息<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/17.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/17.png"></a><br>另外可以多写一个重启脚本，restart.bat：<br>taskkill &#x2F;f &#x2F;t &#x2F;im frpc.exe<br>frpc.exe<br>再次测试<br>此时没有窗口，仍然能访问<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/18.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/18.png"></a><br>win+S 搜索 <strong>任务计划程序</strong> 并打开，执行如下操作：<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/19.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/19.png"></a><br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/20.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/20.png"></a><br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/21.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/21.png"></a></p>
<p><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/22.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/22.png"></a><br>例如你的startfrp.bat在D:\frp\startfrp.bat，那么你只需要在起始于填写D:\frp<br>接着返回常规页，点击确定，此时会要求输入密码，输入你的电脑密码（如果电脑无密码，必须设置一个密码，否则这里无法建立任务计划），然后点击确定即可。<br>以后就会开机自动启动frp了，并且不会弹出命令提示符窗口</p>
<h1 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h1><p>经过测试，无论是执行 bat 还是 exe<br>1、上面的起始于默认填上，避免报错，不填有可能报错，在任务计划程序中运行结果会返回0x1<br>2、需要额外在本地安全策略上进行如下设置，否则在任务计划程序中运行结果可能会返回0x41306<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/23.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/23.png"></a><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/24.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/24.png"></a><br>报错：<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/25.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/25.png"></a><br>保证上面两步的设置，每次重启就没问题了，稳定自启动<br>自启动的程序要在此处看才看的全：<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/26.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/26.png"></a></p>
<h2 id="增加AI绘画的映射："><a href="#增加AI绘画的映射：" class="headerlink" title="增加AI绘画的映射："></a>增加AI绘画的映射：</h2><p>启动AI绘画进程，产生 WEB UI 的HTTP地址：<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/27.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/27.png"></a><br>修改客户端的frpc.ini配置文件，添加如下代码：<br>[AI_web]<br>type &#x3D; tcp                                          &#x2F;&#x2F;一般发布网站，这里的类型填http，但是由于frp服务端的vhost_http_port只能配置一个端口来作为内网客户端网站的映射<br>                                                         &#x2F;&#x2F;所以可以采用tcp的方式发布内网网站，采用tcp，服务端一开始就不用配置vhost_http_port了，直接防火墙放行相应端口即可<br>                                                         &#x2F;&#x2F;所以建议一开始就采用tcp的方式，而不配置http类型，以及服务端配置vhost_http_port<br>                                                         &#x2F;&#x2F;这样的效果就是“客户端提供AI绘画服务（7860），客户端告知服务端开放一个端口（7860）来映射客户端的内网网站”</p>
<p>local_port &#x3D; 7860<br>local_ip &#x3D; 127.0.0.1<br>custom_domains &#x3D; 43.139.77.112<br>remote_port &#x3D; 7860<br>                                                         &#x2F;&#x2F;注意，如果服务端配置了vhost_http_port，而客户端采用tcp的方式去连服务端配置的vhost_http_port端口，就会报如下错误<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/28.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/28.png"></a><br>把云服务器的7860端口放开<br>客户端运行frp程序<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/29.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/29.png"></a><br>测试：<br><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/30.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/30.png"></a><br>成功！</p>
<h2 id="其他："><a href="#其他：" class="headerlink" title="其他："></a>其他：</h2><p>CMD 查看指定的监听的端口：<br>netstat -ano|findstr 8080</p>
<p><a href=""><img src="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/31.png" alt="file://C:/Users/lenovo/AppData/Local/Temp/.XAVDD2/31.png"></a><br>可以写多个frpc.ini配置文件，每个配置文件指向不同的远端frps服务器（ip地址不同），然后针对每个配置文件写一个启动脚本，然后计划任务把这些启动脚本加入进去即可</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/10/20/FRP%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D/" data-id="clnxxk0780000agu26dry6xjz" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2023/10/19/hello-world-1/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">hello world</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">October 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/10/20/FRP%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/10/19/hello-world-1/">hello world</a>
          </li>
        
          <li>
            <a href="/2023/10/19/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>